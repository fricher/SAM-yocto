#LICENSE_FLAGS_WHITELIST = "commercial"

INHERIT += "buildstats"
INHERIT += "toaster buildhistory"
INHERIT += "extrausers"

ICECC_PATH = "/usr/bin/icecc"
ICECC_PARALLEL_MAKE = "-j 32"
ICECC_USER_PACKAGE_BL += " glib-2.0 glib-2.0-native libgcc-initial target-sdk-provides-dummy"
INHERIT += "icecc"

DISTRO = "poky"

USE_DEVFS = "0"

DISTRO_FEATURES = "bluetooth ext2 ipv4 opengl usbutils wifi ${DISTRO_FEATURES_LIBC}"
DISTRO_FEATURES_remove = "alsa directfb kde multiarch wayland x11"
DISTRO_FEATURES_BACKFILL_CONSIDERED += "pulseaudio"

PREFERRED_PROVIDER_virtual/kernel = "linux-raspberrypi-rt"
PREFERRED_VERSION_linux-raspberrypi-rt = "4.14%"

PREFERRED_PROVIDER_jpeg = "libjpeg-turbo"
PREFERRED_PROVIDER_jpeg-native = "libjpeg-turbo-native"

VIRTUAL-RUNTIME_base-utils = "busybox"
VIRTUAL-RUNTIME_base-utils-syslog = "busybox-syslog"
VIRTUAL-RUNTIME_dev_manager = "udev"
VIRTUAL-RUNTIME_login_manager = "busybox"
VIRTUAL-RUNTIME_init_manager = "busybox"
VIRTUAL-RUNTIME_keymaps = "keymaps"

MACHINE_ESSENTIAL_EXTRA_RRECOMMENDS += "kernel-modules"
MACHINE_FEATURES_remove = "alsa apm userland"
MACHINE_FEATURES_BACKFILL_CONSIDERED += "qemu-usermode"

KERNEL_MODULE_AUTOLOAD += "i2c-dev"

BBMASK += "/meta-raspberrypi/dynamic-layers/qt5-layer/recipes-qt/qt5/"
BBMASK += "/meta-raspberrypi/recipes-core/psplash/"

IMAGE_FSTYPES = "rpi-sdimg"

# Choose the board you are building for
MACHINE = "raspberrypi3"
SDKMACHINE = "x86_64"

SERIAL_CONSOLES = ""
ENABLE_UART = "0"
ENABLE_SPI_BUS = "1"
DISABLE_OVERSCAN = "1"
ENABLE_RPI3_SERIAL_CONSOLE = "1"

EXTRA_USERS_PARAMS = "usermod -P root root; "

CONF_VERSION = "1"
